/* ================================================================= */
/* BRUTALIST THEME by DuckTapeKiller (AMENDED) */
/* https://github.com/DuckTapeKiller/Brutalist */
/* ================================================================= */

/* @settings
name: Brutalist Theme Settings
id: brutalist-theme
settings:
    - 
        id: editor-width
        title: Editor Max Width
        description: Controls the maximum width of the text area. Default is 700.
        type: variable-number
        default: 700
        format: px
*/

/* ================================================================= */
/* 0. VARIABLES PRINCIPALES Y PALETA */
/* ================================================================= */
:root {
  /* --- CONFIGURACIÓN DE USUARIO (FALLBACK) --- */
  --editor-width: 700px;

  /* --- FORCED GEOMETRY (ROOT LEVEL) --- */
  --radius-s: 0px !important;
  --radius-m: 0px !important;
  --radius-l: 0px !important;
  --radius-xl: 0px !important;
  --tab-radius: 0px !important;
  --tab-radius-active: 0px !important;
  --button-radius: 0px !important;
  --input-radius: 0px !important;
  --modal-radius: 0px !important;
  --checkbox-radius: 0px !important;
  --toggle-thumb-radius: 0px !important;
  --toggle-track-radius: 0px !important;

  /* --- FUENTES --- */
  --font-monospace: 'Georgia', serif; 
  --font-interface-override: 'American Typewriter', sans-serif;
  --font-text-override: 'Georgia', serif;
  
  --icon-size: 20px;
  --border-width: 1px;

  /* --- PALETA MODO OSCURO (DEFINICIONES) --- */
  --b-dark-bg:          #424242;
  --b-dark-surface:     #383838; /* Ribbons, Sidebars, Modals */
  --b-dark-border:      #606060;
  --b-dark-text-main:   #A5A5A5;
  --b-dark-text-muted:  #909090;
  --b-dark-text-faint:  #606060;
  --b-dark-accent:      #D0D0D0; /* Headers, Active items */
  --b-dark-selection:   rgba(0, 200, 255, 0.15);

  /* --- PALETA MODO CLARO (DEFINICIONES) --- */
  --b-light-bg:         #C5C5C5;
  --b-light-surface:    #B0B0B0; /* Ribbons, Sidebars */
  --b-light-bg-alt:     #a0a0a0;
  --b-light-border:     #808080;
  --b-light-text-main:  #222222;
  --b-light-text-muted: #444444;
  --b-light-text-faint: #666666;
  --b-light-accent:     #0066CC; /* Headers, Links, Active items */
  --b-light-selection:  rgba(0, 200, 255, 0.25); /* Adjusted for visibility */
}

/* ================================================================= */
/* ASIGNACIÓN DE VARIABLES DE OBSIDIAN */
/* ================================================================= */

/* MODO OSCURO */
.theme-dark {
  --background-primary: var(--b-dark-bg) !important;
  --background-primary-alt: var(--b-dark-bg) !important; 
  --background-secondary: var(--b-dark-surface) !important;
  --background-secondary-alt: var(--b-dark-surface) !important;
  --background-modifier-border: var(--b-dark-border) !important;
  --background-modifier-form-field: rgba(0, 0, 0, 0.2);
  --modal-background: var(--b-dark-surface) !important;
  --prompt-background: var(--b-dark-surface) !important;

  --text-normal: var(--b-dark-text-main);
  --text-muted: var(--b-dark-text-muted);
  --text-faint: var(--b-dark-text-faint);
  --text-on-accent: var(--b-dark-surface);
  --text-accent: var(--b-dark-accent);
  --icon-color: #B0B0B0;
  
  --h1-color: var(--b-dark-accent);
  --h2-color: var(--b-dark-accent);
  --h3-color: var(--b-dark-accent);
  --h4-color: var(--b-dark-accent);
  --h5-color: var(--b-dark-accent);
  --h6-color: var(--b-dark-accent);

  --interactive-accent: var(--b-dark-accent);
  --interactive-accent-hover: #ffffff;
  --interactive-normal: var(--b-dark-surface);
  --scrollbar-active-thumb-bg: rgba(255, 255, 255, 0.2);
  
  --table-border-color: var(--b-dark-border);
  --quote-opening-modifier: var(--b-dark-border);

  --checkbox-color: var(--b-dark-accent);
  
  /* Variables específicas re-mapeadas */
  --list-marker-color: var(--b-dark-accent) !important;
  --indentation-guide-color: var(--b-dark-accent) !important;
  --indentation-guide-color-active: var(--b-dark-accent) !important;
}

/* MODO CLARO */
.theme-light {
  --background-primary: var(--b-light-bg) !important;
  --background-primary-alt: var(--b-light-surface) !important;
  --background-secondary: var(--b-light-surface) !important;
  --background-secondary-alt: var(--b-light-bg-alt) !important;
  --background-modifier-border: var(--b-light-border) !important;
  --background-modifier-form-field: rgba(255, 255, 255, 0.4);
  --modal-background: var(--b-light-surface) !important;
  --prompt-background: var(--b-light-surface) !important;

  --text-normal: var(--b-light-text-main);
  --text-muted: var(--b-light-text-muted);
  --text-faint: var(--b-light-text-faint);
  --text-on-accent: #ffffff;
  --text-accent: var(--b-light-accent);

  --h1-color: var(--b-light-accent);
  --h2-color: var(--b-light-accent);
  --h3-color: var(--b-light-accent);
  --h4-color: var(--b-light-accent);
  --h5-color: var(--b-light-accent);
  --h6-color: var(--b-light-accent);

  --interactive-accent: var(--b-light-accent);
  --interactive-accent-hover: #004c99;
  --interactive-normal: var(--b-light-surface);
  --scrollbar-active-thumb-bg: rgba(0, 0, 0, 0.2);

  --table-border-color: var(--b-light-border);
  --quote-opening-modifier: var(--b-light-border);

  --checkbox-color: #000000;

  /* Variables específicas re-mapeadas */
  --list-marker-color: var(--b-light-accent) !important;
  --indentation-guide-color: #000000 !important;
  --indentation-guide-color-active: #000000 !important;
}

/* ================================================================= */
/* 1. COLORES Y SELECCIÓN (FIXED FOR VISIBILITY) */
/* ================================================================= */
body { --text-selection: var(--b-light-selection) !important; } /* Default fallback */
.theme-dark { --text-selection: var(--b-dark-selection) !important; }

/* FIX: Force readable selection in Light Mode (Settings/Editor) */
.theme-light ::selection { background-color: rgba(0, 200, 255, 0.25) !important; color: #000000 !important; }
.theme-light .modal ::selection { background-color: rgba(0, 200, 255, 0.25) !important; color: #000000 !important; }

/* Fallback/Dark Mode Selection */
::selection { background-color: rgba(0, 200, 255, 0.15) !important; }
.cm-selectionBackground, .cm-line::selection, .cm-content::selection {
  background-color: rgba(0, 200, 255, 0.15) !important;
}

/* FIX LISTAS Y TEXTO: Color Normal */
.markdown-preview-view ul > li, .markdown-preview-view ol > li, 
.markdown-preview-view ul > li > p, .markdown-preview-view ol > li > p,
.cm-s-obsidian .HyperMD-list-line, .cm-line {
    color: var(--text-normal) !important;
}

/* MARCADORES (a., b., 1.): Color Acento */
.markdown-preview-view ul > li::marker, .markdown-preview-view ol > li::marker,
.markdown-preview-view blockquote ul > li::marker, .markdown-preview-view blockquote ol > li::marker,
.theme-light .cm-formatting-list, .theme-light .cm-formatting-list-ul, .theme-light .cm-formatting-list-ol,
.theme-dark .cm-formatting-list, .theme-dark .cm-formatting-list-ul, .theme-dark .cm-formatting-list-ol,
.cm-s-obsidian .cm-quote .cm-formatting-list {
    color: var(--list-marker-color) !important;
    font-weight: bold !important;
    opacity: 1 !important;
}
.theme-light .cm-formatting-list-ol { color: var(--b-light-accent) !important; }

/* ================================================================= */
/* 2. ESTRUCTURA LATERAL Y BARRA DE TÍTULO (FIX TOP LEFT LINE) */
/* ================================================================= */

/* MODO OSCURO: Ajuste exacto de color para evitar manchas */
.theme-dark .workspace-ribbon.mod-left, 
.theme-dark .workspace-split.mod-left-split, 
.theme-dark .workspace-sidedock-vault-profile, 
.theme-dark .nav-header, 
.theme-dark .workspace-split.mod-right-split, 
.theme-dark .workspace-split.mod-right-split .workspace-tabs, 
.theme-dark .workspace-split.mod-right-split .workspace-tab-container { 
    background-color: var(--b-dark-surface) !important; 
    border-right: 1px solid var(--b-dark-border) !important; 
    border-bottom: none !important; 
}

/* FIX: Top Left Corner (Mac Traffic Lights Area) - Restore ONLY horizontal border */
.theme-dark .workspace-ribbon.mod-left::before,
.theme-dark .titlebar-button-container.mod-left {
    background-color: var(--b-dark-surface) !important; 
    border: none !important; /* Reset all borders first */
    border-bottom: 1px solid var(--b-dark-border) !important; /* Add back only the bottom one */
}

.theme-dark .workspace-split.mod-root { background-color: var(--b-dark-bg) !important; }

/* MODO CLARO: Ajuste exacto de color para evitar manchas */
.theme-light .workspace-ribbon.mod-left, 
.theme-light .workspace-split.mod-left-split, 
.theme-light .workspace-sidedock-vault-profile, 
.theme-light .nav-header, 
.theme-light .workspace-split.mod-right-split, 
.theme-light .workspace-split.mod-right-split .workspace-tabs, 
.theme-light .workspace-split.mod-right-split .workspace-tab-container { 
    background-color: var(--b-light-surface) !important; 
    border-right: 1px solid var(--b-light-border) !important; 
    border-bottom: none !important; 
}

/* FIX: Top Left Corner (Mac Traffic Lights Area) - Restore ONLY horizontal border */
.theme-light .workspace-ribbon.mod-left::before,
.theme-light .titlebar-button-container.mod-left {
    background-color: var(--b-light-surface) !important; 
    border: none !important; /* Reset all borders first */
    border-bottom: 1px solid var(--b-light-border) !important; /* Add back only the bottom one */
}

.theme-light .workspace-split.mod-root { background-color: var(--b-light-bg) !important; }

.theme-light .sidebar-toggle-button { background-color: var(--b-light-surface) !important; border: none !important; }

/* ================================================================= */
/* 3. PESTAÑAS */
/* ================================================================= */
.workspace-tab-header-container { padding-bottom: 0 !important; margin-bottom: 0 !important; }
.theme-dark .workspace-tab-header-container { background-color: var(--b-dark-surface) !important; border-bottom: 1px solid var(--b-dark-border) !important; }
.theme-light .workspace-tab-header-container { background-color: var(--b-light-surface) !important; border-bottom: 1px solid var(--b-light-border) !important; }
.workspace-tab-header, .workspace-tab-header-inner { border-radius: 0 !important; box-shadow: none !important; }
.workspace-tab-header::before, .workspace-tab-header::after { display: none !important; }

/* ACTIVE TABS */
.theme-dark .workspace-split.mod-root .workspace-tab-header.is-active { background-color: var(--b-dark-bg) !important; border: 1px solid var(--b-dark-border) !important; border-bottom: none !important; padding: 3px !important; margin-bottom: -1px !important; z-index: 100; }
.theme-dark .workspace-split.mod-root .workspace-tab-header.is-active .workspace-tab-header-inner { border: 2.0px solid var(--b-dark-accent) !important; background-color: var(--b-dark-bg) !important; color: var(--b-dark-accent) !important; width: 100% !important; margin: 0 !important; }

.theme-light .workspace-split.mod-root .workspace-tab-header.is-active { background-color: var(--b-light-bg) !important; border: 1px solid var(--b-light-border) !important; border-bottom: none !important; padding: 3px !important; margin-bottom: -1px !important; z-index: 100; }
.theme-light .workspace-split.mod-root .workspace-tab-header.is-active .workspace-tab-header-inner { border: 2.5px solid var(--b-light-accent) !important; background-color: var(--b-light-bg) !important; color: var(--b-light-accent) !important; width: 100% !important; margin: 0 !important; }

/* INACTIVE TABS */
.theme-dark .workspace-split.mod-root .workspace-tab-header:not(.is-active) { background-color: var(--b-dark-surface) !important; border: 1px solid var(--b-dark-border) !important; margin: 4px 2px 0 0 !important; }
.theme-dark .workspace-split.mod-root .workspace-tab-header:not(.is-active) .workspace-tab-header-inner { border: none !important; background: transparent !important; color: var(--b-dark-text-main) !important; }
.theme-light .workspace-split.mod-root .workspace-tab-header:not(.is-active) { background-color: var(--b-light-surface) !important; border: 1px solid var(--b-light-border) !important; margin: 4px 2px 0 0 !important; }
.theme-light .workspace-split.mod-root .workspace-tab-header:not(.is-active) .workspace-tab-header-inner { border: none !important; background: transparent !important; color: var(--b-light-text-main) !important; }

.theme-dark .workspace-split.mod-left-split .workspace-tab-header.is-active .workspace-tab-header-inner, .theme-dark .workspace-split.mod-right-split .workspace-tab-header.is-active .workspace-tab-header-inner { border: 2.0px solid var(--b-dark-accent) !important; }
.theme-light .workspace-split.mod-left-split .workspace-tab-header.is-active .workspace-tab-header-inner, .theme-light .workspace-split.mod-right-split .workspace-tab-header.is-active .workspace-tab-header-inner { border: 2.5px solid var(--b-light-accent) !important; }

.theme-dark .workspace-leaf.mod-active .view-header-title { color: var(--b-dark-accent); }
.theme-dark .workspace-leaf:not(.mod-active) .view-header-title { color: var(--b-dark-text-main) !important; }
.theme-light .workspace-leaf.mod-active .view-header-title { color: var(--b-light-accent) !important; font-weight: bold; }
.theme-light .workspace-leaf:not(.mod-active) .view-header-title { color: #000000 !important; }
.theme-light .vertical-tab-header-group-title { color: #000000 !important; font-weight: bold !important; }
.theme-dark .vertical-tab-header-group-title { color: #FFFFFF !important; font-weight: bold !important; }

/* ================================================================= */
/* 4. ICONOS Y BOTONES (FIXED BLACK TEXT ON BUTTONS) */
/* ================================================================= */
.theme-light .clickable-icon, .theme-light .svg-icon, .theme-light .side-dock-ribbon-action, .theme-light .nav-action-button { color: #333333 !important; stroke: #333333 !important; }
.theme-light .clickable-icon.is-active, .theme-light .side-dock-ribbon-action.is-active, .theme-light .nav-action-button.is-active { color: #000000 !important; stroke: #000000 !important; box-shadow: inset 0 0 0 1px var(--b-light-accent) !important; background-color: rgba(0, 102, 204, 0.15) !important; border-radius: 0 !important; }
.theme-light .clickable-icon:hover, .theme-light .side-dock-ribbon-action:hover { color: #000000 !important; stroke: #000000 !important; }
.theme-dark .clickable-icon.is-active, .theme-dark .side-dock-ribbon-action.is-active, .theme-dark .nav-action-button.is-active { color: var(--b-dark-accent) !important; stroke: var(--b-dark-accent) !important; box-shadow: inset 0 0 0 1px var(--b-dark-accent) !important; background-color: rgba(208, 208, 208, 0.15) !important; border-radius: 0 !important; }

/* FIX: Ensure buttons with accent background have white text in Light Mode */
.theme-light button.mod-cta, .theme-light button.mod-cta:hover { color: #ffffff !important; }

/* ================================================================= */
/* 5. BARRA DE ESTADO */
/* ================================================================= */
.status-bar, .status-bar-item { border-radius: 0 !important; }
.theme-dark .status-bar { color: var(--b-dark-accent); background-color: var(--b-dark-surface) !important; border: none !important; }
.theme-dark .status-bar-item { border: 1px solid var(--b-dark-accent) !important; padding: 2px 6px; margin: 0; color: var(--b-dark-accent); background-color: var(--b-dark-bg); }
.theme-light .status-bar { color: var(--b-light-accent); background-color: var(--b-light-surface) !important; border: none !important; }
.theme-light .status-bar-item { border: 1px solid var(--b-light-accent) !important; padding: 2px 6px; margin: 0; color: var(--b-light-accent); background-color: var(--b-light-bg); }

/* ================================================================= */
/* 6. CALENDARIO */
/* ================================================================= */
.theme-dark #calendar-container .day.today { background: none !important; border: none !important; border-radius: 0 !important; color: var(--b-dark-accent) !important; font-weight: bold !important; }
.theme-dark #calendar-container .day .dot { background-color: var(--b-dark-accent) !important; border: none !important; width: 6px !important; height: 6px !important; border-radius: 50% !important; display: block !important; margin: 0 auto !important; }
.theme-light #calendar-container .day.today { background: none !important; border: none !important; border-radius: 0 !important; color: var(--b-light-accent) !important; font-weight: bold !important; }
.theme-light #calendar-container .day .dot { background-color: var(--b-light-accent) !important; border: none !important; width: 6px !important; height: 6px !important; border-radius: 50% !important; display: block !important; margin: 0 auto !important; }

/* ================================================================= */
/* 7. ICONOS DE CARPETAS */
/* ================================================================= */
:root { --chevron-icon: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="2" fill="none"/></svg>'); }
.theme-light .nav-folder .collapse-icon svg.svg-icon, .theme-dark .nav-folder .collapse-icon svg.svg-icon { display: none; }
.theme-dark .nav-folder .collapse-icon, .theme-light .nav-folder .collapse-icon { mask: var(--chevron-icon) no-repeat center; width: 16px; height: 16px; opacity: 1 !important; margin-right: 2px; background: currentColor !important; transition: transform 0.1s ease-in-out; }
.theme-dark .nav-folder .collapse-icon { background: var(--b-dark-accent) !important; }
.theme-light .nav-folder .collapse-icon { background: var(--b-light-accent) !important; }
.nav-folder.is-collapsed > .nav-folder-title .collapse-icon { transform: rotate(0deg) !important; }
.nav-folder:not(.is-collapsed) > .nav-folder-title .collapse-icon { transform: rotate(90deg) !important; }

/* ================================================================= */
/* 8. TIPOGRAFÍA Y TEXTO (FIX: COLOR DE BLOCKQUOTE) */
/* ================================================================= */
.theme-dark .markdown-source-view, .theme-dark .markdown-preview-view, .theme-dark .cm-s-obsidian .cm-line, .theme-dark .nav-folder-title-content, .theme-dark .nav-file-title-content { color: var(--b-dark-text-main) !important; }
.theme-dark .nav-folder-children, .theme-dark .nav-folder-children::before, .theme-dark .nav-folder-children > .nav-folder-item { border-left: 1px solid var(--b-dark-accent) !important; }
.theme-dark .nav-file-title::before { border-left: none !important; content: none !important; }
.theme-light .markdown-source-view, .theme-light .markdown-preview-view, .theme-light .cm-s-obsidian .cm-line, .theme-light .nav-folder-title-content, .theme-light .nav-file-title-content { color: var(--b-light-text-main) !important; }
.theme-light .nav-folder-children, .theme-light .nav-folder-children::before, .theme-light .nav-folder-children > .nav-folder-item { border-left: 1px solid var(--b-light-accent) !important; } 
.theme-light .nav-file-title::before { border-left: none !important; content: none !important; }

.inline-title, h1, h2, h3, h4, h5, h6, .cm-header { font-family: 'American Typewriter', monospace !important; font-weight: normal !important; }
.theme-dark .inline-title, .theme-dark h1, .theme-dark h2, .theme-dark h3, .theme-dark h4, .theme-dark h5, .theme-dark h6, .theme-dark .cm-header { color: var(--b-dark-accent) !important; }
.theme-light .inline-title, .theme-light h1, .theme-light h2, .theme-light h3, .theme-light h4, .theme-light h5, .theme-light h6, .theme-light .cm-header { color: var(--b-light-accent) !important; }
.markdown-preview-view p, .markdown-source-view.mod-cm6 .cm-line { text-align: justify; text-justify: inter-word; }

/* FIX: BLOCKQUOTE COLOR (con marcadores brillantes) */
.markdown-preview-view blockquote { border-color: transparent; font-size: 95%; text-align: center; hyphens: auto; color: var(--text-normal) !important; padding: 1px 2%; margin: 15pt 0; }
.theme-light .markdown-preview-view blockquote { color: var(--b-light-text-main) !important; }
.theme-light a:hover, .theme-light .metadata-link:hover, .theme-light .external-link:hover, .theme-light .cm-s-obsidian .cm-link:hover, .theme-light .metadata-property-value a:hover { color: #000000 !important; font-weight: bold !important; }

/* Marcadores en Blockquotes */
.markdown-preview-view blockquote ul > li::marker, 
.markdown-preview-view blockquote ol > li::marker {
    color: var(--list-marker-color) !important;
    font-weight: bold !important;
    opacity: 1 !important;
}

/* Bloques de código */
.theme-light code, .theme-light .cm-s-obsidian .cm-inline-code, .theme-light .markdown-source-view.mod-cm6 .cm-content code, .theme-light .markdown-preview-view code, .theme-light pre, .theme-light .HyperMD-codeblock { background-color: var(--b-light-surface) !important; color: var(--b-light-text-main) !important; border-radius: 4px; }
.theme-dark code, .theme-dark .cm-s-obsidian .cm-inline-code, .theme-dark .markdown-source-view.mod-cm6 .cm-content code, .theme-dark .markdown-preview-view code, .theme-dark pre, .theme-dark .HyperMD-codeblock { background-color: #262626 !important; color: var(--b-dark-text-main) !important; border-radius: 4px; }

/* Callouts */
.theme-light .callout { background-color: rgba(0, 102, 204, 0.15) !important; border-left: 4px solid var(--b-light-accent) !important; }
.theme-light .callout-title-inner { color: var(--b-light-accent) !important; font-weight: bold !important; }
.theme-dark .callout { background-color: rgba(255, 255, 255, 0.05) !important; border-left: 4px solid var(--b-dark-text-main) !important; --callout-color: 165, 165, 165 !important; --callout-icon: var(--b-dark-text-main) !important; }
.theme-dark .callout-title { color: var(--b-dark-text-main) !important; }
.theme-dark .callout-icon { color: var(--b-dark-text-main) !important; }

/* ================================================================= */
/* 9. CASILLAS DE VERIFICACIÓN (MARKDOWN & TOGGLES) */
/* ================================================================= */

/* --- A. CHECKBOXES DE NOTAS --- */
.markdown-source-view .task-list-item-checkbox,
.markdown-preview-view input[type="checkbox"],
.metadata-property input[type="checkbox"] {
  -webkit-appearance: none !important; appearance: none !important;
  border-radius: 0 !important; width: 16px !important; height: 16px !important; margin: 0 !important; padding: 0 !important;
  border: 1px solid var(--checkbox-color) !important; background-color: transparent !important; cursor: pointer;
  display: inline-flex !important; vertical-align: middle; box-sizing: border-box !important;
}

.markdown-source-view .task-list-item-checkbox:checked,
.markdown-preview-view input[type="checkbox"]:checked,
.metadata-property input[type="checkbox"]:checked {
  background-color: var(--checkbox-color) !important; border-color: var(--checkbox-color) !important;
  box-shadow: inset 0 0 0 3px var(--background-primary) !important;
  background-image: none !important;
}

.markdown-source-view .task-list-item-checkbox::before, .markdown-source-view .task-list-item-checkbox::after,
.markdown-preview-view input[type="checkbox"]::before, .markdown-preview-view input[type="checkbox"]::after {
  content: none !important; display: none !important;
}

/* --- B. TOGGLES DE CONFIGURACIÓN --- */
.modal .checkbox-container { width: 42px !important; height: 22px !important; box-sizing: border-box !important; position: relative !important; overflow: hidden !important; border-radius: 0 !important; }
.modal .checkbox-container::after { content: "" !important; display: block !important; width: 14px !important; height: 14px !important; position: absolute !important; top: 50% !important; left: 3px !important; transform: translateY(-50%) !important; margin: 0 !important; box-shadow: none !important; transition: left 0.2s ease-in-out, background-color 0.2s !important; border-radius: 50% !important; }
.modal .checkbox-container.is-enabled::after { transform: translate3d(20px, -50%, 0) !important; left: 3px !important; }

.theme-light .modal .checkbox-container { border: 1px solid #000000 !important; background-color: rgba(255, 0, 0, 0.15) !important; }
.theme-light .modal .checkbox-container.is-enabled { background-color: rgba(0, 255, 0, 0.15) !important; border: 1px solid #000000 !important; }
.theme-light .modal .checkbox-container::after { background-color: #000000 !important; border: none !important; }

.theme-dark .modal .checkbox-container { border: 1px solid #FFFFFF !important; background-color: rgba(255, 0, 0, 0.2) !important; }
.theme-dark .modal .checkbox-container.is-enabled { background-color: rgba(0, 255, 0, 0.2) !important; border: 1px solid #FFFFFF !important; }
.theme-dark .modal .checkbox-container::after { background-color: #000000 !important; border: 1px solid #FFFFFF !important; }

.modal button, .modal .dropdown, .modal input[type="search"], .modal input[type="text"] { border-radius: 0 !important; }

/* --- C. FRONT MATTER (METADATA) --- */
.metadata-container, .metadata-content, .metadata-property, 
.metadata-property-key-input, .metadata-property-value-input,
.metadata-property:hover, .metadata-property.is-active,
.metadata-property-key-input:hover, .metadata-property-value-input:hover,
.metadata-property-key-input:focus, .metadata-property-value-input:focus { border-radius: 0 !important; }

.theme-light .metadata-property-key, .theme-light .metadata-property-value, .theme-light .metadata-label, .theme-light .multi-select-pill-content, .theme-light .metadata-input-longtext { color: #333333 !important; }
.theme-light .metadata-property-key-input, .theme-light .metadata-property-value-input { color: #000000 !important; }
.theme-light .metadata-link, .theme-light .metadata-property-value .external-link, .theme-light .metadata-property-value a { color: #000000 !important; text-decoration-color: #000000 !important; }
.theme-light .metadata-input-longtext:empty::before, .theme-light .metadata-property-value-input:empty::before { color: #707070 !important; opacity: 1 !important; }
.theme-light .metadata-property:hover, .theme-light .metadata-property.is-active, .theme-light .metadata-property-key-input:hover, .theme-light .metadata-property-value-input:hover { border-color: var(--b-light-accent) !important; box-shadow: 0 0 0 1px var(--b-light-accent) !important; z-index: 10; }
.theme-dark .metadata-property:hover, .theme-dark .metadata-property.is-active, .theme-dark .metadata-property-key-input:hover, .theme-dark .metadata-property-value-input:hover { border-color: var(--b-dark-accent) !important; box-shadow: 0 0 0 1px var(--b-dark-accent) !important; z-index: 10; }

/* ================================================================= */
/* 10. VARIOS */
/* ================================================================= */
.countTable table table td:nth-child(2) { width: 40px; white-space: normal; }
body.theme-dark .search-result-file-title { color: var(--b-dark-accent) !important; font-weight: normal; }
body.theme-light .search-result-file-title { color: black !important; font-weight: bold; }
.workspace-drawer-vault-name { display: inline-block; padding: 0.1em 0.8em; font-weight: bold; font-size: 0.85em; border-radius: 0; margin: 0; }
.theme-dark .workspace-drawer-vault-name { background-color: #414141 !important; color: var(--b-dark-accent) !important; border: 1px solid var(--b-dark-accent) !important; }
.theme-light .workspace-drawer-vault-name { background-color: var(--b-light-surface) !important; color: var(--b-light-accent) !important; border: 1px solid var(--b-light-accent) !important; }

/* MODIFIED: Uses variable defined in Style Settings block at top */
.markdown-preview-view, .markdown-source-view { max-width: var(--editor-width); margin: auto; }

.markdown-preview-view p, .cm-content .cm-line { line-height: 1.8; }
::-webkit-scrollbar { width: 8px; } ::-webkit-scrollbar-track { background: transparent; } ::-webkit-scrollbar-thumb { background-color: rgba(100, 100, 100, 0.5); border-radius: 4px; } body:not(:hover) ::-webkit-scrollbar-thumb { background-color: transparent; }

/* ================================================================= */
/* 11. BASES DE DATOS */
/* ================================================================= */
.bases-td input[type="checkbox"] { 
  -webkit-appearance: none !important; appearance: none !important; border-radius: 0 !important; width: 16px !important; height: 16px !important; cursor: pointer; margin: 0 !important; padding: 0 !important; 
  display: inline-flex !important; justify-content: center; align-items: center; vertical-align: middle; box-sizing: border-box !important; border: 1px solid var(--checkbox-color) !important; background-color: transparent !important;
}
.bases-td input[type="checkbox"]:checked {
  border: 1px solid var(--checkbox-color) !important; background-color: var(--checkbox-color) !important; box-shadow: inset 0 0 0 3px var(--background-primary) !important; background-image: none !important;
}
.bases-td input[type="checkbox"]::before, .bases-td input[type="checkbox"]::after { content: none !important; display: none !important; background-image: none !important; }

/* ================================================================= */
/* 12. ETIQUETAS Y CONTADORES */
/* ================================================================= */
.tag, .cm-hashtag, .cm-hashtag-begin, .cm-hashtag-end, .metadata-tag, .multi-select-pill { border-radius: 0 !important; }
.theme-light .tag, .theme-light .cm-hashtag, .theme-light .cm-hashtag-begin, .theme-light .cm-hashtag-end, .theme-light .metadata-tag, .theme-light .multi-select-pill { color: var(--b-light-accent) !important; border: 1px solid var(--b-light-accent) !important; background-color: rgba(0, 102, 204, 0.1) !important; }
.theme-dark .tag, .theme-dark .cm-hashtag, .theme-dark .cm-hashtag-begin, .theme-dark .cm-hashtag-end, .theme-dark .metadata-tag, .theme-dark .multi-select-pill { color: var(--b-dark-accent) !important; border: 1px solid var(--b-dark-accent) !important; background-color: rgba(208, 208, 208, 0.1) !important; }
.theme-light .tag-pane-tag-count, .theme-light .tree-item-flair { color: var(--b-light-accent) !important; background-color: rgba(0, 102, 204, 0.1) !important; border: none !important; }
.theme-dark .tag-pane-tag-count, .theme-dark .tree-item-flair { color: var(--b-dark-accent) !important; background-color: rgba(208, 208, 208, 0.1) !important; border: none !important; }

/* ================================================================= */
/* 13. RESALTADO */
/* ================================================================= */
body { --text-highlight-bg: rgba(0, 102, 255, 0.2) !important; }
mark, .cm-highlight { background-color: rgba(0, 102, 255, 0.2) !important; color: inherit !important; }

/* ================================================================= */
/* 14. PÁGINA DE NUEVA PESTAÑA */
/* ================================================================= */
.theme-light .empty-state-action:hover, .theme-light .empty-state-action.is-focused { color: #000000 !important; background-color: rgba(0, 102, 204, 0.1) !important; }

/* ================================================================= */
/* 15. AJUSTES MÓVILES */
/* ================================================================= */
.is-mobile.theme-light .workspace-ribbon.mod-left::before, .is-mobile.theme-light .workspace-ribbon.mod-left { background-color: var(--b-light-surface) !important; border: none !important; }
.is-mobile.theme-light .sidebar-toggle-button.mod-left, .is-mobile.theme-light .sidebar-toggle-button.mod-left .clickable-icon { background-color: transparent !important; box-shadow: none !important; border: none !important; }

/* ================================================================= */
/* 16. MODALES Y CONFIGURACIÓN */
/* ================================================================= */
.theme-dark .modal { --text-normal: var(--b-dark-accent) !important; --text-muted: #B0B0B0 !important; }

/* FIX: Text color on selected settings menu items in Light Mode */
.theme-light .vertical-tab-nav-item.is-active {
    color: #ffffff !important;
    background-color: var(--b-light-accent) !important;
}

/* ================================================================= */
/* 17. FINAL ENFORCEMENT (ROOT LEVEL OVERRIDES) */
/* ================================================================= */
/* Force all elements to be squared regardless of specificity issues */
* {
    border-radius: 0 !important;
}